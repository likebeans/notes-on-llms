---
title: RAG æ¦‚è¿°
description: æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯å…¨æ™¯ä»‹ç»
---

# RAG æ¦‚è¿°

## ğŸ¯ æœ¬ç¯‡ç›®æ ‡

> ç†è§£ RAG æ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆéœ€è¦å®ƒã€ä»¥åŠå®ƒçš„æ ¸å¿ƒæ¶æ„ã€‚

## ğŸ“Š æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ RAGï¼Ÿ

**RAGï¼ˆRetrieval-Augmented Generationï¼‰** = æ£€ç´¢ + ç”Ÿæˆ

```
ç”¨æˆ·é—®é¢˜ â†’ æ£€ç´¢ç›¸å…³æ–‡æ¡£ â†’ æ–‡æ¡£ + é—®é¢˜ â†’ LLM ç”Ÿæˆç­”æ¡ˆ
```

### ä¸ºä»€ä¹ˆéœ€è¦ RAGï¼Ÿ

| é—®é¢˜ | RAG å¦‚ä½•è§£å†³ |
|------|-------------|
| LLM çŸ¥è¯†è¿‡æ—¶ | æ£€ç´¢æœ€æ–°æ–‡æ¡£ |
| LLM ä¸äº†è§£ç§æœ‰æ•°æ® | æ£€ç´¢ä¼ä¸šçŸ¥è¯†åº“ |
| LLM å¹»è§‰ï¼ˆç¼–é€ äº‹å®ï¼‰ | åŸºäºçœŸå®æ–‡æ¡£ç”Ÿæˆ |
| Token ä¸Šä¸‹æ–‡é™åˆ¶ | åªæ£€ç´¢ç›¸å…³ç‰‡æ®µ |

### RAG æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç¦»çº¿ç´¢å¼•                          â”‚
â”‚  æ–‡æ¡£ â†’ åˆ‡åˆ† â†’ Embedding â†’ å‘é‡æ•°æ®åº“                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åœ¨çº¿æŸ¥è¯¢                          â”‚
â”‚  é—®é¢˜ â†’ Embedding â†’ æ£€ç´¢ â†’ é‡æ’åº â†’ LLM ç”Ÿæˆ â†’ ç­”æ¡ˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’» æœ€å°å®è·µ

```python
from openai import OpenAI
from chromadb import Client

# 1. ç´¢å¼•æ–‡æ¡£
chroma = Client()
collection = chroma.create_collection("docs")
collection.add(
    documents=["RAG æ˜¯æ£€ç´¢å¢å¼ºç”Ÿæˆ...", "LLM æ˜¯å¤§è¯­è¨€æ¨¡å‹..."],
    ids=["doc1", "doc2"]
)

# 2. æ£€ç´¢ + ç”Ÿæˆ
query = "ä»€ä¹ˆæ˜¯ RAGï¼Ÿ"
results = collection.query(query_texts=[query], n_results=2)

context = "\n".join(results["documents"][0])
prompt = f"åŸºäºä»¥ä¸‹å†…å®¹å›ç­”é—®é¢˜ï¼š\n{context}\n\né—®é¢˜ï¼š{query}"

client = OpenAI()
response = client.chat.completions.create(
    model="gpt-4",
    messages=[{"role": "user", "content": prompt}]
)
print(response.choices[0].message.content)
```

## âš ï¸ å¸¸è§å‘ä¸æ’é›·

- **åˆ‡åˆ†ç²’åº¦**ï¼šå¤ªå¤§æ£€ç´¢ä¸å‡†ï¼Œå¤ªå°ä¸¢å¤±ä¸Šä¸‹æ–‡
- **Embedding é€‰æ‹©**ï¼šä¸­æ–‡åœºæ™¯éœ€è¦é€‰å¯¹æ¨¡å‹
- **æ£€ç´¢ Top-K**ï¼šK å¤ªå¤§å¢åŠ å™ªéŸ³ï¼Œå¤ªå°å¯èƒ½æ¼æ‰å…³é”®ä¿¡æ¯

## ğŸ“š å»¶ä¼¸é˜…è¯»

- [æ–‡æ¡£åˆ‡åˆ†](/rag/chunking)
- [Embedding](/rag/embedding)
- [å‘é‡æ•°æ®åº“](/rag/vector-db)
