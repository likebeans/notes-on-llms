---
title: åŸºç¡€æç¤ºæŠ€æœ¯
description: Zero-shotã€Few-shotã€æ€ç»´é“¾ç­‰æ ¸å¿ƒæŠ€æœ¯
---

# åŸºç¡€æç¤ºæŠ€æœ¯

> æŽŒæ¡ä¸ŽLLMå¯¹è¯çš„åŸºç¡€æŠ€èƒ½

## ðŸŽ¯ Zero-shot Prompting

### æ¦‚å¿µ

ç›´æŽ¥å‘æ¨¡åž‹æé—®ï¼Œä¸æä¾›ä»»ä½•ç¤ºä¾‹ã€‚

```
ç”¨æˆ·ï¼šå°†ä»¥ä¸‹å¥å­ç¿»è¯‘æˆè‹±æ–‡ï¼šä»Šå¤©å¤©æ°”å¾ˆå¥½ã€‚
æ¨¡åž‹ï¼šToday the weather is very nice.
```

### é€‚ç”¨åœºæ™¯

- ç®€å•ä»»åŠ¡
- æ¨¡åž‹èƒ½åŠ›è¶³å¤Ÿ
- å¿«é€ŸåŽŸåž‹éªŒè¯

### ä¼˜åŒ–æŠ€å·§

```python
# âŒ æ¨¡ç³ŠæŒ‡ä»¤
prompt_bad = "å†™ç‚¹ä¸œè¥¿"

# âœ… æ˜Žç¡®æŒ‡ä»¤
prompt_good = """
è¯·å†™ä¸€æ®µå…³äºŽäººå·¥æ™ºèƒ½çš„ä»‹ç»ï¼Œè¦æ±‚ï¼š
- é•¿åº¦ï¼š100-150å­—
- é£Žæ ¼ï¼šç§‘æ™®å‘
- é‡ç‚¹ï¼šAIçš„åº”ç”¨åœºæ™¯
"""
```

---

## ðŸŽ¯ Few-shot Prompting

### æ¦‚å¿µ

æä¾›å‡ ä¸ªç¤ºä¾‹ï¼Œè®©æ¨¡åž‹å­¦ä¹ æ¨¡å¼åŽå®Œæˆä»»åŠ¡ã€‚

```
ç”¨æˆ·ï¼š
æƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡ï¼š

è¾“å…¥ï¼šè¿™å®¶é¤åŽ…çš„èœå¤ªå¥½åƒäº†ï¼
è¾“å‡ºï¼šæ­£é¢

è¾“å…¥ï¼šç­‰äº†ä¸¤å°æ—¶æ‰ä¸Šèœï¼Œä½“éªŒå¾ˆå·®ã€‚
è¾“å‡ºï¼šè´Ÿé¢

è¾“å…¥ï¼šè¿™éƒ¨ç”µå½±è®©æˆ‘çœ‹å“­äº†ï¼Œå¤ªæ„Ÿäººäº†ã€‚
è¾“å‡ºï¼š
æ¨¡åž‹ï¼šæ­£é¢
```

### ç¤ºä¾‹æ•°é‡é€‰æ‹©

| ç¤ºä¾‹æ•° | æ•ˆæžœ | Tokenæˆæœ¬ |
|--------|------|-----------|
| 1-2ä¸ª | åŸºç¡€ | ä½Ž |
| 3-5ä¸ª | è‰¯å¥½ | ä¸­ |
| 5-10ä¸ª | æœ€ä½³ | é«˜ |

### ç¤ºä¾‹é€‰æ‹©åŽŸåˆ™

1. **å¤šæ ·æ€§**ï¼šè¦†ç›–ä¸åŒæƒ…å†µ
2. **ä»£è¡¨æ€§**ï¼šåæ˜ çœŸå®žåˆ†å¸ƒ
3. **ç›¸å…³æ€§**ï¼šä¸Žç›®æ ‡ä»»åŠ¡ç›¸ä¼¼
4. **è´¨é‡**ï¼šç¤ºä¾‹æœ¬èº«è¦æ­£ç¡®

```python
def select_examples(query, example_pool, k=5):
    """é€‰æ‹©ä¸ŽæŸ¥è¯¢æœ€ç›¸å…³çš„ç¤ºä¾‹"""
    from sentence_transformers import SentenceTransformer
    from sklearn.metrics.pairwise import cosine_similarity
    
    model = SentenceTransformer('all-MiniLM-L6-v2')
    
    query_emb = model.encode([query])
    example_embs = model.encode([e['input'] for e in example_pool])
    
    similarities = cosine_similarity(query_emb, example_embs)[0]
    top_indices = similarities.argsort()[-k:][::-1]
    
    return [example_pool[i] for i in top_indices]
```

---

## ðŸ§  æ€ç»´é“¾ï¼ˆChain-of-Thoughtï¼‰

> æ¥æºï¼š[å¾®è°ƒé«˜çº§æŽ¨ç†å¤§æ¨¡åž‹ï¼ˆCOTï¼‰ç»¼åˆæŒ‡å—](https://dd-ff.blog.csdn.net/article/details/153210150)

### æ¦‚å¿µ

è®©æ¨¡åž‹é€æ­¥å±•ç¤ºæŽ¨ç†è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ç›´æŽ¥ç»™å‡ºç­”æ¡ˆã€‚

### Zero-shot CoT

```
ç”¨æˆ·ï¼šå°æ˜Žæœ‰5ä¸ªè‹¹æžœï¼Œç»™äº†å°çº¢2ä¸ªï¼Œåˆä¹°äº†3ä¸ªï¼Œè¯·é—®çŽ°åœ¨æœ‰å‡ ä¸ªï¼Ÿ
è¯·ä¸€æ­¥ä¸€æ­¥æ€è€ƒã€‚

æ¨¡åž‹ï¼šè®©æˆ‘é€æ­¥åˆ†æžï¼š
1. å°æ˜Žæœ€åˆæœ‰5ä¸ªè‹¹æžœ
2. ç»™äº†å°çº¢2ä¸ªï¼Œå‰©ä½™ï¼š5 - 2 = 3ä¸ª
3. åˆä¹°äº†3ä¸ªï¼ŒçŽ°åœ¨æœ‰ï¼š3 + 3 = 6ä¸ª
ç­”æ¡ˆï¼š6ä¸ªè‹¹æžœ
```

### Few-shot CoT

```
ç”¨æˆ·ï¼š
é—®é¢˜ï¼šä¸€ä¸ªå•†åº—æœ‰24ä¸ªè‹¹æžœï¼Œå–æŽ‰äº†8ä¸ªï¼Œåˆè¿›è´§äº†12ä¸ªï¼ŒçŽ°åœ¨æœ‰å¤šå°‘ï¼Ÿ
æ€è€ƒï¼š
- åˆå§‹ï¼š24ä¸ª
- å–æŽ‰åŽï¼š24 - 8 = 16ä¸ª
- è¿›è´§åŽï¼š16 + 12 = 28ä¸ª
ç­”æ¡ˆï¼š28ä¸ª

é—®é¢˜ï¼šå°æ˜Žæœ‰5ä¸ªè‹¹æžœï¼Œç»™äº†å°çº¢2ä¸ªï¼Œåˆä¹°äº†3ä¸ªï¼ŒçŽ°åœ¨æœ‰å‡ ä¸ªï¼Ÿ
æ€è€ƒï¼š
```

### CoTæœ€ä½³å®žè·µ

| æŠ€å·§ | è¯´æ˜Ž |
|------|------|
| **æ˜Žç¡®è§¦å‘è¯** | "è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ€è€ƒ" |
| **ç»“æž„åŒ–æ­¥éª¤** | ä½¿ç”¨ç¼–å·æˆ–åˆ†éš”ç¬¦ |
| **æœ€ç»ˆç­”æ¡ˆæ ‡è®°** | æ˜Žç¡®æ ‡æ³¨"ç­”æ¡ˆï¼š" |
| **é”™è¯¯æ£€æŸ¥** | æç¤ºæ¨¡åž‹éªŒè¯ç»“æžœ |

---

## ðŸŽ¯ Self-Consistency

### æ¦‚å¿µ

å¤šæ¬¡é‡‡æ ·ï¼Œå–ä¼—æ•°ä½œä¸ºæœ€ç»ˆç­”æ¡ˆã€‚

```python
import openai
from collections import Counter

def self_consistency(prompt: str, n_samples: int = 5) -> str:
    """è‡ªæ´½æ€§æŽ¨ç†"""
    answers = []
    
    for _ in range(n_samples):
        response = openai.chat.completions.create(
            model="gpt-4",
            messages=[{"role": "user", "content": prompt}],
            temperature=0.7  # å…è®¸ä¸€å®šéšæœºæ€§
        )
        # æå–ç­”æ¡ˆ
        answer = extract_answer(response.choices[0].message.content)
        answers.append(answer)
    
    # æŠ•ç¥¨å–ä¼—æ•°
    most_common = Counter(answers).most_common(1)[0][0]
    return most_common
```

### é€‚ç”¨åœºæ™¯

- æ•°å­¦æŽ¨ç†
- é€»è¾‘åˆ¤æ–­
- äº‹å®žæ€§é—®ç­”

---

## ðŸ“‹ è§’è‰²è®¾å®šï¼ˆRole Promptingï¼‰

### æ¦‚å¿µ

ä¸ºæ¨¡åž‹è®¾å®šç‰¹å®šè§’è‰²ï¼Œå½±å“å…¶å›žç­”é£Žæ ¼å’Œä¸“ä¸šåº¦ã€‚

```
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„Pythonå¼€å‘ä¸“å®¶ï¼Œæ‹¥æœ‰10å¹´ç»éªŒã€‚
è¯·ä»¥ä¸“ä¸šä½†æ˜“æ‡‚çš„æ–¹å¼å›žç­”ä»¥ä¸‹é—®é¢˜ï¼š

ç”¨æˆ·é—®é¢˜ï¼šä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ
```

### å¸¸ç”¨è§’è‰²æ¨¡æ¿

| è§’è‰² | é€‚ç”¨åœºæ™¯ |
|------|----------|
| ä¸“å®¶ | æŠ€æœ¯é—®ç­” |
| æ•™å¸ˆ | æ¦‚å¿µè§£é‡Š |
| ç¼–è¾‘ | æ–‡æœ¬ä¼˜åŒ– |
| æ‰¹è¯„å®¶ | è´¨é‡è¯„ä¼° |
| åŠ©æ‰‹ | é€šç”¨ä»»åŠ¡ |

---

## ðŸ”— ç›¸å…³é˜…è¯»

- [é«˜çº§æç¤ºæŠ€æœ¯](/prompt/advanced) - ReActã€ToTç­‰
- [ä¸Šä¸‹æ–‡å·¥ç¨‹](/prompt/context) - åŠ¨æ€ä¸Šä¸‹æ–‡ç®¡ç†
- [æç¤ºè¯æ¦‚è¿°](/prompt/) - æŠ€æœ¯å…¨æ™¯

> **å¤–éƒ¨èµ„æº**ï¼š
> - [OpenAI Prompt Engineering Guide](https://platform.openai.com/docs/guides/prompt-engineering)
> - [Prompt Engineering Guide](https://www.promptingguide.ai/)
